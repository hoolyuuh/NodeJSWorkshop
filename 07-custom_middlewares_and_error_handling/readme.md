Added middlewares and error when handling the data sent